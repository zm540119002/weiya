<!-- 数量编辑器 -->
<template id="quantity_edit_tpl">
    <div class="quantity_wrapper selected-number">
        <a href="javascript:void(0);" class="reduce" @click="reduce">-</a>
        <input type="text" :value="quantity" class="f24 product_count">
        <a href="javascript:void(0);" class="plus" @click="plus">+</a>
    </div>
</template>
<script type="text/javascript">
    $(function(){
        Vue.component('quantity-edit', {
            template:'#quantity_edit_tpl',
            props: {
                step_quantity: {
                    type: Number,
                    default: 1
                },
                init_quantity: {
                    type: Number,
                    default: 1
                }
            },
            data: function () {
                return {
                    'quantity':this.init_quantity
                };
            },
            methods: {
                reduce: function () {
                    if(this.quantity>this.step_quantity){
                        this.quantity -= this.step_quantity;
                    }
                },
                plus: function () {
                    this.quantity += this.step_quantity;
                }
            },computed: {
                doThis: function () {
                    console.log(this);
                }
            }
        });
    });
</script>
<!-- 产品选择器 -->
<template id="product_select_tpl">
    <p><span class="red subtotal_amount">￥{{subtotal_amount}}</span></p>
    <div class="columns_flex l-r-sides">
        <div>
            <p>{{buy_named}}(单位:{{unit}})</p>
            <p>
                <span class="step-named">{{step_named}}</span>:
                <span class="step-quantity">{{init_quantity}}</span>
                <span class="unit">{{unit}}</span>
            </p>
            <p>样品购买限额：<span class="quota">1</span></p>
        </div>
        <div><span class="red deal_price">￥{{deal_price}}</span></div>
        <quantity-edit :init_quantity="init_quantity" :step_quantity="step_quantity" ></quantity-edit>
    </div>
</template>
<script type="text/javascript">
    $(function(){
        var productSelectParam = '{$productSelectParam|raw}';
        if(productSelectParam){
            productSelectParam = JSON.parse(productSelectParam)
        }
        Vue.component('product-select', {
            template:'#product_select_tpl',
            props: {
                buy_named: {
                    type: String,
                    default: '购买数量'
                },step_named: {
                    type: String,
                    default: '起订数量'
                }
            },
            data: function () {
                return {
                    'unit':productSelectParam.unit?productSelectParam.unit:'盒',
                    'deal_price':parseInt(productSelectParam.deal_price)>1?productSelectParam.deal_price:1,
                    'subtotal_amount':0,
                    'init_quantity':parseInt(productSelectParam.init_quantity)>1?productSelectParam.init_quantity:0,
                    'step_quantity':parseInt(productSelectParam.step_quantity)>1?productSelectParam.step_quantity:1
                };
            },
            methods: {
                reduce: function () {
                },
                plus: function () {
                }
            },computed: {
                doThis: function () {
                }
            }
        });
    });
</script>
<!-- 底栏购物菜单 -->
<template id="footer-cart-menu_tpl">
    <footer class="f24 ">
        <div class="group_cart_nav">
            <a href="javascript:void(0);" v-for="menu in menus" :data-jump_url="menu.action" :class="menu.class">
                {{menu.name}}
                <!-- 全选 -->
                <div v-if="menu.class.indexOf('checked_all')!=-1">
                    <input type="checkbox" class="check-all">
                    <label for="" class="left">全选</label>
                </div>
                <!-- 总金额 -->
                <div v-else-if="menu.class.indexOf('amount')!=-1">
                    <span class="total_amount">￥{{total_amount}}</span>
                </div>
                <!-- 购物篮 -->
                <div v-else-if="menu.class.indexOf('add_cart_icon')!=-1">
                    <span class="add_num"></span>
                    <span class="cart_num"></span>
                </div>
                <!-- 默认 -->
                <div v-else>
                    <span class="s_i"></span>
                </div>
            </a>
        </div>
    </footer>
</template>
<script type="text/javascript">
    $(function(){
        var unlockingFooterCart = '{$unlockingFooterCart|raw}';
        if(unlockingFooterCart){
            unlockingFooterCart = JSON.parse(unlockingFooterCart);
            Vue.component('footer-cart-menu', {
                template:'#footer-cart-menu_tpl',
                data: function () {
                    return {
                        total_amount:0,
                        menus: unlockingFooterCart.menu
                    }
                },
                methods: {
                    test: function () {
                        console.log(this);
                    }
                },computed: {
                    test1: function () {
                        console.log(this);
                    }
                }
            });
        }
    });
</script>