<style>
    .loginTab{
        display: none;
    }.show{
        display: block;
    }
</style>
<!-- 产品选择器 -->
<template id="login_tpl">
    <section class="userInfoWrapper">
        <div class="ucenter_logo">
            <img src="api_common_img/ucenter_logo.png" alt="">
        </div>
        <div class="f24 bomb_box">
            <ul class="loginNav">
                <li @click="toggleCurrent" :class="{current:true}">登录</li>
                <li @click="toggleCurrent" :class="{current:false}">注册/重置密码</li>
            </ul>
            <form class="loginTab" :class="{show:true}">
                <div class="login_item">
                    <div class="columns_flex">
                        <span>中国(+86)</span>
                        <input class="username user_phone input-filed" type="tel" placeholder="请输入手机号码" name="mobile_phone" v-model="mobile_phone">
                    </div>
                </div>
                <div class="login_item">
                    <div class="columns_flex">
                        <input class="input-filed password" type="password" placeholder="密码" name="password" v-model="password">
                    </div>
                </div>
                <a href="javascript:void(0);" class="entry-button" @click="login">登录</a>
            </form>
            <form class="loginTab" :class="{show:false}">
                <div class="error_tipc" ></div>
                <div class="login_item">
                    <div class="columns_flex">
                        <span>中国(+86)</span>
                        <input class="username user_phone input-filed" type="tel" placeholder="请输入手机号码" name="mobile_phone" v-model="mobile_phone">
                    </div>
                </div>
                <div class="smsLogin login_wrap">
                    <div class="login_item">
                        <div class="columns_flex l-r-sides">
                            <input type="text" class="tel_code input-filed" placeholder="请输入收到的验证码" name="captcha" v-model="captcha">
                            <a href="javascript:void(0);" class="send_sms">获取验证码</a>
                        </div>
                    </div>
                </div>
                <div class="login_item">
                    <div class="columns_flex">
                        <input class="input-filed password" autocomplete="new-password" type="password" placeholder="设置密码" name="password" v-model="password">
                    </div>
                </div>
                <a href="javascript:void(0);" class="entry-button" @click="register">确定</a>
            </form>
        </div>
    </section>
</template>
<script type="text/javascript">
    $(function(){
        //表单切换
        Vue.component('login', {
            template:'#login_tpl',
            data: function () {
                return {
                    postData:{
                        mobile_phone:'',
                        password:'',
                        captcha:''
                    }
                };
            },
            methods: {
                toggleCurrent:function(event){
                    let _thisLi = $(event.currentTarget);
                    _thisLi.length && _thisLi.addClass("current").siblings().removeClass("current");
                    let _thisIndex = _thisLi.index();
                    $.each(_thisLi.parents('.userInfoWrapper').find('form'),function(index){
                        if(index==_thisIndex){
                            $(this).addClass("show").siblings().removeClass("show");
                        }
                    });
                },verify:function(){
                    let content='';
                    if(this.postData.mobile_phone && !register.phoneCheck(this.postData.mobile_phone)){
                        content='请输入正确手机号码';
                    }else if(this.postData.captcha && !register.vfyCheck(this.postData.captcha)){
                        content = "请输入正确的验证码";
                    }else if(this.postData.password && !register.pswCheck(this.postData.password)){
                        content = "请输入6-16数字或字母的密码";
                    }
                    if(content){
                        errorTipc(content);
                        return false;
                    }
                },login:function(event){
                    console.log(this.postData);
//                    let _this = $(event.currentTarget);
//                    let _thisForm = _this.parents('form');
//                    console.log(_thisForm);
//                    if(_thisForm.length){
//                        this.postData = _thisForm.serializeObject();
//                        console.log(this.postData);
//                    }

                },register:function(event){
                }
            },created: function(){
            }
        });
    });
</script>